(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _photoGrid = require('./components/photo-grid');

var _photoGrid2 = _interopRequireDefault(_photoGrid);

var _menu = require('./components/menu');

var _menu2 = _interopRequireDefault(_menu);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var App = function () {
  function App() {
    _classCallCheck(this, App);

    this.photoGrid = new _photoGrid2.default();
    var menuAction = this.photoGrid.requestPhotos.bind(this.photoGrid);
    this.menu = new _menu2.default(menuAction);
  }

  _createClass(App, [{
    key: 'render',
    value: function render() {
      var app = document.createElement('div');
      app.className = "app";
      app.appendChild(this.photoGrid.render());
      app.appendChild(this.menu.render());

      return app;
    }
  }]);

  return App;
}();

exports.default = App;

},{"./components/menu":3,"./components/photo-grid":4}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var LightBox = function () {
  function LightBox(photoset) {
    _classCallCheck(this, LightBox);

    this.photoset = photoset;

    // next btn
    this.handleNext = this.handleNext.bind(this);
    this.nextBtn = document.createElement('a');
    this.nextBtn.innerHTML = '&#10095;'; // ❯
    this.nextBtn.className = 'next-btn';
    this.nextBtn.onclick = this.handleNext;

    // prev btn
    this.handlePrev = this.handlePrev.bind(this);
    this.prevBtn = document.createElement('a');
    this.prevBtn.innerHTML = '&#10094;'; // ❮
    this.prevBtn.className = 'prev-btn';
    this.prevBtn.onclick = this.handlePrev;

    // close button
    this.handleClose = this.handleClose.bind(this);
    var closeBtn = document.createElement('a');
    closeBtn.innerHTML = '&#215;'; // ×
    closeBtn.className = 'close-btn';
    closeBtn.onclick = this.handleClose;

    // photo placeholder
    var photoPlaceholder = document.createElement('div');

    // caption
    this.caption = document.createElement('div');
    this.caption.className = 'caption';

    // photo container
    this.photoContainer = document.createElement('div');
    this.photoContainer.className = "photo-container";
    this.photoContainer.appendChild(photoPlaceholder);
    this.photoContainer.appendChild(this.caption);

    // lightbox
    this.lightBox = document.createElement('div');
    this.lightBox.id = "lightbox";
    this.lightBox.appendChild(closeBtn);
    this.lightBox.appendChild(this.photoContainer);
    this.lightBox.appendChild(this.nextBtn);
    this.lightBox.appendChild(this.prevBtn);

    // enable keyboard nav
    document.addEventListener("keydown", this.handleKey.bind(this));
  }

  _createClass(LightBox, [{
    key: 'handleNext',
    value: function handleNext(event) {
      event.preventDefault();
      if (this.index < this.photoset.length - 1) {
        this.index += 1;
        this.prevBtn.style.display = 'inline'; //show prev btn
        this.render(this.photoset[this.index], this.index);
      } else {
        this.nextBtn.style.display = 'none'; //hide next btn
      }
    }
  }, {
    key: 'handlePrev',
    value: function handlePrev(event) {
      event.preventDefault();
      if (this.index > 0) {
        this.index -= 1;
        this.nextBtn.style.display = 'inline'; //show next btn
        this.render(this.photoset[this.index], this.index);
      } else {
        this.prevBtn.style.display = 'none'; //hide prev btn
      }
    }
  }, {
    key: 'handleClose',
    value: function handleClose(event) {
      event.preventDefault();
      document.body.removeChild(this.lightBox);
      document.removeEventListener("keydown", this.handleKey.bind(this)); // disable keyboard nav
    }
  }, {
    key: 'handleKey',
    value: function handleKey(event) {
      switch (event.keyCode) {
        case 39:
          this.handleNext(event);
          break;
        case 37:
          this.handlePrev(event);
          break;
        case 27:
          this.handleClose(event);
          break;
      }
    }
  }, {
    key: 'render',
    value: function render(item, index) {
      this.index = index;

      // next/prev btn visibility
      if (this.index > 0 && this.index < this.photoset.length - 1) {
        this.nextBtn.style.display = 'inline'; //show next btn
        this.prevBtn.style.display = 'inline'; //show prev btn
      } else if (this.index == 0) {
        this.prevBtn.style.display = 'none'; //hide prev btn
      } else if (this.index == this.photoset.length - 1) {
        this.nextBtn.style.display = 'none'; //hide next btn
      }

      // photo image
      var photoSrc = _utils2.default.CONSTANTS.IMG_HOST + item.farm + '/' + item.server + '/' + item.id + '_' + item.secret + '.jpg';
      var photo = document.createElement('img');
      photo.id = "photo";
      photo.src = photoSrc;

      // replace placeholder w/ photo
      var placeholder = this.photoContainer.childNodes[0];
      if (placeholder) {
        this.photoContainer.replaceChild(photo, placeholder);
        photo.className = "photo"; //className added here to enable animation
      }

      // update caption
      this.caption.innerText = item.title;

      // add lightbox to body
      document.body.appendChild(this.lightBox);
      this.lightBox.className = "lightbox"; //className added here to enable animation
    }
  }]);

  return LightBox;
}();

exports.default = LightBox;

},{"./utils":6}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Menu = function () {
  function Menu(menuAction) {
    _classCallCheck(this, Menu);

    this.menuAction = menuAction;
    this.handleMenuAction = this.handleMenuAction.bind(this);
    this.index = 1;
  }

  _createClass(Menu, [{
    key: 'handleMenuAction',
    value: function handleMenuAction(event) {
      event.preventDefault();
      var photoSet = _utils2.default.CONSTANTS.PHOTO_SET;
      this.menuAction(this.index);
      this.index++;
      if (this.index == photoSet.length) {
        this.index = 0;
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var menuBtn = document.createElement('a');
      menuBtn.className = "menu-btn";
      menuBtn.innerText = '↻ load more photos';
      menuBtn.onclick = this.handleMenuAction;

      var menu = document.createElement('div');
      menu.className = "menu";
      menu.appendChild(menuBtn);

      var footer = document.createElement('footer');
      footer.className = "footer";
      footer.appendChild(menu);

      return footer;
    }
  }]);

  return Menu;
}();

exports.default = Menu;

},{"./utils":6}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _photo = require('./photo');

var _photo2 = _interopRequireDefault(_photo);

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

var _lightbox = require('./lightbox');

var _lightbox2 = _interopRequireDefault(_lightbox);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PhotoGrid = function () {
  function PhotoGrid() {
    _classCallCheck(this, PhotoGrid);

    this.title = document.createElement('div');
    this.title.className = "photoset-title";
    this.ownerName = document.createElement('div');
    this.ownerName.className = "owner-name";

    this.header = document.createElement('li');
    this.header.className = "header";
    this.header.appendChild(this.title);
    this.header.appendChild(this.ownerName);

    this.photoGrid = document.createElement('ul');
    this.photoGrid.className = "photo-grid";
    this.photoGrid.id = "photo-grid";
    this.photoGrid.appendChild(this.header);

    this.requestPhotos();
  }

  _createClass(PhotoGrid, [{
    key: 'requestPhotos',
    value: function requestPhotos(photoSetId) {
      var id = photoSetId ? photoSetId : 0;
      var uri = _utils2.default.CONSTANTS.API_HOST + _utils2.default.CONSTANTS.API_QUERY_STRING + _utils2.default.CONSTANTS.PHOTO_SET[id];
      _utils2.default.xhr(uri, this.render.bind(this));
    }
  }, {
    key: 'emptyPhotoGrid',
    value: function emptyPhotoGrid() {
      while (this.photoGrid.childElementCount > 1) {
        this.photoGrid.removeChild(this.photoGrid.lastChild);
      }
    }
  }, {
    key: 'render',
    value: function render(data) {
      var _this = this;

      if (data) {
        var body = JSON.parse(data);
        var photoset = body.photoset;

        if (photoset) {
          (function () {
            _this.title.innerText = "#" + photoset.title;
            _this.ownerName.innerText = "@" + photoset.ownername;

            _this.lightBox = new _lightbox2.default(photoset.photo);
            var clickAction = _this.lightBox.render.bind(_this.lightBox);

            // empty grid before adding new photoset
            _this.emptyPhotoGrid();

            photoset.photo.forEach(function (item, index) {
              var photo = new _photo2.default(item, index, clickAction);
              this.photoGrid.appendChild(photo.render());
            }.bind(_this));
          })();
        }
      }

      return this.photoGrid;
    }
  }]);

  return PhotoGrid;
}();

exports.default = PhotoGrid;

},{"./lightbox":2,"./photo":5,"./utils":6}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Photo = function () {
  function Photo(item, index, clickAction) {
    _classCallCheck(this, Photo);

    this.item = item;
    this.index = index;
    this.clickAction = clickAction;
    this.handleClickAction = this.handleClickAction.bind(this);
  }

  _createClass(Photo, [{
    key: 'handleClickAction',
    value: function handleClickAction(event) {
      event.preventDefault();
      this.clickAction(this.item, this.index);
    }
  }, {
    key: 'render',
    value: function render() {
      // photo thumbnail image
      var thumbnailSrc = _utils2.default.CONSTANTS.IMG_HOST + this.item.farm + '/' + this.item.server + '/' + this.item.id + '_' + this.item.secret + '_m.jpg';

      // overlay
      var overlay = document.createElement('span');
      overlay.className = "overlay";

      // photo title
      var title = document.createElement('span');
      title.className = "title";
      title.innerText = this.item.title;

      // photo
      var photo = document.createElement('a');
      photo.className = "photo-thumbnail";
      photo.onclick = this.handleClickAction;
      photo.style.backgroundImage = "url('" + thumbnailSrc + "')";
      photo.appendChild(overlay);
      photo.appendChild(title);

      // li
      var li = document.createElement('li');
      li.appendChild(photo);

      return li;
    }
  }]);

  return Photo;
}();

exports.default = Photo;

},{"./utils":6}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var Utils = {
  xhr: function xhr(uri, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      if (xhr.readyState == XMLHttpRequest.DONE) {
        if (xhr.status == 200) {
          callback(xhr.responseText);
        }
      }
    };
    xhr.open("GET", uri, true);
    xhr.send();
  },

  CONSTANTS: {
    API_HOST: 'https://api.flickr.com/services/rest/',
    API_QUERY_STRING: '?method=flickr.photosets.getPhotos&format=json&nojsoncallback=1&api_key=4e4e0d1c667cb6e65d3af06d88cebe6d&photoset_id=',
    PHOTO_SET: ['72157624439393875', '72157661422082384', '72157623692742906', '72157623459524476', '72157623173893194'],
    IMG_HOST: '//c2.staticflickr.com/'
  }
};
exports.default = Utils;

},{}],7:[function(require,module,exports){
'use strict';

var _app = require('./app');

var _app2 = _interopRequireDefault(_app);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var app = new _app2.default();
document.getElementById('slack-assignment').appendChild(app.render());

},{"./app":1}]},{},[7]);

//# sourceMappingURL=maps/lightbox.min.js.map
