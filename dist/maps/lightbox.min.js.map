{"version":3,"names":[],"mappings":"","sources":["lightbox.min.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _photoGrid = require('./components/photo-grid');\n\nvar _photoGrid2 = _interopRequireDefault(_photoGrid);\n\nvar _menu = require('./components/menu');\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar App = function () {\n  function App() {\n    _classCallCheck(this, App);\n\n    this.photoGrid = new _photoGrid2.default();\n    var menuAction = this.photoGrid.requestPhotos.bind(this.photoGrid);\n    this.menu = new _menu2.default(menuAction);\n  }\n\n  _createClass(App, [{\n    key: 'render',\n    value: function render() {\n      var app = document.createElement('div');\n      app.className = \"app\";\n      app.appendChild(this.photoGrid.render());\n      app.appendChild(this.menu.render());\n\n      return app;\n    }\n  }]);\n\n  return App;\n}();\n\nexports.default = App;\n\n},{\"./components/menu\":3,\"./components/photo-grid\":4}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LightBox = function () {\n  function LightBox(photoset) {\n    _classCallCheck(this, LightBox);\n\n    this.photoset = photoset;\n\n    // next btn\n    this.handleNext = this.handleNext.bind(this);\n    this.nextBtn = document.createElement('a');\n    this.nextBtn.innerHTML = '&#10095;'; // ❯\n    this.nextBtn.className = 'next-btn';\n    this.nextBtn.onclick = this.handleNext;\n\n    // prev btn\n    this.handlePrev = this.handlePrev.bind(this);\n    this.prevBtn = document.createElement('a');\n    this.prevBtn.innerHTML = '&#10094;'; // ❮\n    this.prevBtn.className = 'prev-btn';\n    this.prevBtn.onclick = this.handlePrev;\n\n    // close button\n    this.handleClose = this.handleClose.bind(this);\n    var closeBtn = document.createElement('a');\n    closeBtn.innerHTML = '&#215;'; // ×\n    closeBtn.className = 'close-btn';\n    closeBtn.onclick = this.handleClose;\n\n    // photo placeholder\n    var photoPlaceholder = document.createElement('div');\n\n    // caption\n    this.caption = document.createElement('div');\n    this.caption.className = 'caption';\n\n    // photo container\n    this.photoContainer = document.createElement('div');\n    this.photoContainer.className = \"photo-container\";\n    this.photoContainer.appendChild(photoPlaceholder);\n    this.photoContainer.appendChild(this.caption);\n\n    // lightbox\n    this.lightBox = document.createElement('div');\n    this.lightBox.id = \"lightbox\";\n    this.lightBox.appendChild(closeBtn);\n    this.lightBox.appendChild(this.photoContainer);\n    this.lightBox.appendChild(this.nextBtn);\n    this.lightBox.appendChild(this.prevBtn);\n\n    // enable keyboard nav\n    document.addEventListener(\"keydown\", this.handleKey.bind(this));\n  }\n\n  _createClass(LightBox, [{\n    key: 'handleNext',\n    value: function handleNext(event) {\n      event.preventDefault();\n      if (this.index < this.photoset.length - 1) {\n        this.index += 1;\n        this.prevBtn.style.display = 'inline'; //show prev btn\n        this.render(this.photoset[this.index], this.index);\n      } else {\n        this.nextBtn.style.display = 'none'; //hide next btn\n      }\n    }\n  }, {\n    key: 'handlePrev',\n    value: function handlePrev(event) {\n      event.preventDefault();\n      if (this.index > 0) {\n        this.index -= 1;\n        this.nextBtn.style.display = 'inline'; //show next btn\n        this.render(this.photoset[this.index], this.index);\n      } else {\n        this.prevBtn.style.display = 'none'; //hide prev btn\n      }\n    }\n  }, {\n    key: 'handleClose',\n    value: function handleClose(event) {\n      event.preventDefault();\n      document.body.removeChild(this.lightBox);\n      document.removeEventListener(\"keydown\", this.handleKey.bind(this)); // disable keyboard nav\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(event) {\n      switch (event.keyCode) {\n        case 39:\n          this.handleNext(event);\n          break;\n        case 37:\n          this.handlePrev(event);\n          break;\n        case 27:\n          this.handleClose(event);\n          break;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render(item, index) {\n      this.index = index;\n\n      // next/prev btn visibility\n      if (this.index > 0 && this.index < this.photoset.length - 1) {\n        this.nextBtn.style.display = 'inline'; //show next btn\n        this.prevBtn.style.display = 'inline'; //show prev btn\n      } else if (this.index == 0) {\n        this.prevBtn.style.display = 'none'; //hide prev btn\n      } else if (this.index == this.photoset.length - 1) {\n        this.nextBtn.style.display = 'none'; //hide next btn\n      }\n\n      // photo image\n      var photoSrc = _utils2.default.CONSTANTS.IMG_HOST + item.farm + '/' + item.server + '/' + item.id + '_' + item.secret + '.jpg';\n      var photo = document.createElement('img');\n      photo.id = \"photo\";\n      photo.src = photoSrc;\n\n      // replace placeholder w/ photo\n      var placeholder = this.photoContainer.childNodes[0];\n      if (placeholder) {\n        this.photoContainer.replaceChild(photo, placeholder);\n        photo.className = \"photo\"; //className added here to enable animation\n      }\n\n      // update caption\n      this.caption.innerText = item.title;\n\n      // add lightbox to body\n      document.body.appendChild(this.lightBox);\n      this.lightBox.className = \"lightbox\"; //className added here to enable animation\n    }\n  }]);\n\n  return LightBox;\n}();\n\nexports.default = LightBox;\n\n},{\"./utils\":6}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Menu = function () {\n  function Menu(menuAction) {\n    _classCallCheck(this, Menu);\n\n    this.menuAction = menuAction;\n    this.handleMenuAction = this.handleMenuAction.bind(this);\n    this.index = 1;\n  }\n\n  _createClass(Menu, [{\n    key: 'handleMenuAction',\n    value: function handleMenuAction(event) {\n      event.preventDefault();\n      var photoSet = _utils2.default.CONSTANTS.PHOTO_SET;\n      this.menuAction(this.index);\n      this.index++;\n      if (this.index == photoSet.length) {\n        this.index = 0;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var menuBtn = document.createElement('a');\n      menuBtn.className = \"menu-btn\";\n      menuBtn.innerText = '↻ load more photos';\n      menuBtn.onclick = this.handleMenuAction;\n\n      var menu = document.createElement('div');\n      menu.className = \"menu\";\n      menu.appendChild(menuBtn);\n\n      var footer = document.createElement('footer');\n      footer.className = \"footer\";\n      footer.appendChild(menu);\n\n      return footer;\n    }\n  }]);\n\n  return Menu;\n}();\n\nexports.default = Menu;\n\n},{\"./utils\":6}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _photo = require('./photo');\n\nvar _photo2 = _interopRequireDefault(_photo);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _lightbox = require('./lightbox');\n\nvar _lightbox2 = _interopRequireDefault(_lightbox);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PhotoGrid = function () {\n  function PhotoGrid() {\n    _classCallCheck(this, PhotoGrid);\n\n    this.title = document.createElement('div');\n    this.title.className = \"photoset-title\";\n    this.ownerName = document.createElement('div');\n    this.ownerName.className = \"owner-name\";\n\n    this.header = document.createElement('li');\n    this.header.className = \"header\";\n    this.header.appendChild(this.title);\n    this.header.appendChild(this.ownerName);\n\n    this.photoGrid = document.createElement('ul');\n    this.photoGrid.className = \"photo-grid\";\n    this.photoGrid.id = \"photo-grid\";\n    this.photoGrid.appendChild(this.header);\n\n    this.requestPhotos();\n  }\n\n  _createClass(PhotoGrid, [{\n    key: 'requestPhotos',\n    value: function requestPhotos(photoSetId) {\n      var id = photoSetId ? photoSetId : 0;\n      var uri = _utils2.default.CONSTANTS.API_HOST + _utils2.default.CONSTANTS.API_QUERY_STRING + _utils2.default.CONSTANTS.PHOTO_SET[id];\n      _utils2.default.xhr(uri, this.render.bind(this));\n    }\n  }, {\n    key: 'emptyPhotoGrid',\n    value: function emptyPhotoGrid() {\n      while (this.photoGrid.childElementCount > 1) {\n        this.photoGrid.removeChild(this.photoGrid.lastChild);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render(data) {\n      var _this = this;\n\n      if (data) {\n        var body = JSON.parse(data);\n        var photoset = body.photoset;\n\n        if (photoset) {\n          (function () {\n            _this.title.innerText = \"#\" + photoset.title;\n            _this.ownerName.innerText = \"@\" + photoset.ownername;\n\n            _this.lightBox = new _lightbox2.default(photoset.photo);\n            var clickAction = _this.lightBox.render.bind(_this.lightBox);\n\n            // empty grid before adding new photoset\n            _this.emptyPhotoGrid();\n\n            photoset.photo.forEach(function (item, index) {\n              var photo = new _photo2.default(item, index, clickAction);\n              this.photoGrid.appendChild(photo.render());\n            }.bind(_this));\n          })();\n        }\n      }\n\n      return this.photoGrid;\n    }\n  }]);\n\n  return PhotoGrid;\n}();\n\nexports.default = PhotoGrid;\n\n},{\"./lightbox\":2,\"./photo\":5,\"./utils\":6}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Photo = function () {\n  function Photo(item, index, clickAction) {\n    _classCallCheck(this, Photo);\n\n    this.item = item;\n    this.index = index;\n    this.clickAction = clickAction;\n    this.handleClickAction = this.handleClickAction.bind(this);\n  }\n\n  _createClass(Photo, [{\n    key: 'handleClickAction',\n    value: function handleClickAction(event) {\n      event.preventDefault();\n      this.clickAction(this.item, this.index);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      // photo thumbnail image\n      var thumbnailSrc = _utils2.default.CONSTANTS.IMG_HOST + this.item.farm + '/' + this.item.server + '/' + this.item.id + '_' + this.item.secret + '_m.jpg';\n\n      // overlay\n      var overlay = document.createElement('span');\n      overlay.className = \"overlay\";\n\n      // photo title\n      var title = document.createElement('span');\n      title.className = \"title\";\n      title.innerText = this.item.title;\n\n      // photo\n      var photo = document.createElement('a');\n      photo.className = \"photo-thumbnail\";\n      photo.onclick = this.handleClickAction;\n      photo.style.backgroundImage = \"url('\" + thumbnailSrc + \"')\";\n      photo.appendChild(overlay);\n      photo.appendChild(title);\n\n      // li\n      var li = document.createElement('li');\n      li.appendChild(photo);\n\n      return li;\n    }\n  }]);\n\n  return Photo;\n}();\n\nexports.default = Photo;\n\n},{\"./utils\":6}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Utils = {\n  xhr: function xhr(uri, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == XMLHttpRequest.DONE) {\n        if (xhr.status == 200) {\n          callback(xhr.responseText);\n        }\n      }\n    };\n    xhr.open(\"GET\", uri, true);\n    xhr.send();\n  },\n\n  CONSTANTS: {\n    API_HOST: 'https://api.flickr.com/services/rest/',\n    API_QUERY_STRING: '?method=flickr.photosets.getPhotos&format=json&nojsoncallback=1&api_key=4e4e0d1c667cb6e65d3af06d88cebe6d&photoset_id=',\n    PHOTO_SET: ['72157624439393875', '72157661422082384', '72157623692742906', '72157623459524476', '72157623173893194'],\n    IMG_HOST: '//c2.staticflickr.com/'\n  }\n};\nexports.default = Utils;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nvar _app = require('./app');\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar app = new _app2.default();\ndocument.getElementById('slack-assignment').appendChild(app.render());\n\n},{\"./app\":1}]},{},[7]);\n"],"file":"lightbox.min.js","sourceRoot":"/source/"}